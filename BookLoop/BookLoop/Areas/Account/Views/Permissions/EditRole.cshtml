@model BookLoop.Role
@{
    Layout = "_Layout";
    var all = (IEnumerable<BookLoop.Permission>)ViewBag.AllPerms;
    var had = (HashSet<int>)ViewBag.Had;
}
<h3>編輯角色權限：@Model.RoleName (@Model.RoleCode)</h3>
<form method="post" action="/Permissions/EditRolePerms">
    <input type="hidden" name="roleId" value="@Model.RoleID" />
    @foreach (var p in all)
    {
        <div class="form-check">
            <input class="form-check-input" type="checkbox" name="permissionIds" value="@p.PermissionID" @(had.Contains(p.PermissionID) ? "checked" : "") />
            <label class="form-check-label">@p.PermKey - @p.PermName</label>
        </div>
    }
    <button class="btn btn-primary mt-2">儲存</button>
</form>
