@model BookLoop.Models.Order

@{
    ViewData["Title"] = "Details";
}

<h1>訂單詳細資訊</h1>

<div>
    
    <hr />
    <dl class="row">
        <dt class="col-sm-2">@Html.DisplayNameFor(model => model.OrderDate)</dt>
        <dd class="col-sm-10">@Html.DisplayFor(model => model.OrderDate)</dd>

        <dt class="col-sm-2">總金額</dt>
        <dd class="col-sm-10">
            @Model.OrderDetails.Sum(od => od.UnitPrice * od.Quantity).ToString("N0")
        </dd>

        <dt class="col-sm-2">@Html.DisplayNameFor(model => model.Status)</dt>
        <dd class="col-sm-10">
            @{
                string statusText = Model.Status switch
                {
                    0 => "待付款",
                    1 => "已下訂",
                    2 => "已出貨",
                    3 => "完成訂單",
                    4 => "已取消",
                    _ => "未知狀態"
                };
            }
            @statusText
        </dd>

        <dt class="col-sm-2">@Html.DisplayNameFor(model => model.DiscountCode)</dt>
        <dd class="col-sm-10">@Html.DisplayFor(model => model.DiscountCode)</dd>

        <dt class="col-sm-2">@Html.DisplayNameFor(model => model.CreatedAt)</dt>
        <dd class="col-sm-10">@Html.DisplayFor(model => model.CreatedAt)</dd>

        <dt class="col-sm-2">@Html.DisplayNameFor(model => model.CouponTypeSnap)</dt>
        <dd class="col-sm-10">@Html.DisplayFor(model => model.CouponTypeSnap)</dd>

        <dt class="col-sm-2">@Html.DisplayNameFor(model => model.CouponNameSnap)</dt>
        <dd class="col-sm-10">@Html.DisplayFor(model => model.CouponNameSnap)</dd>

        <dt class="col-sm-2">@Html.DisplayNameFor(model => model.CouponDiscountAmount)</dt>
        <dd class="col-sm-10">@Html.DisplayFor(model => model.CouponDiscountAmount)</dd>

        <dt class="col-sm-2">會員帳號</dt>
        <dd class="col-sm-10">@Model.Member?.Username</dd>

        <dt class="col-sm-2">Email</dt>
        <dd class="col-sm-10">@Model.Member?.Email</dd>

        <dt class="col-sm-2">手機</dt>
        <dd class="col-sm-10">@Model.Member?.Phone</dd>
    </dl>


</div>

<div>
    <a asp-action="Index" class="btn btn-secondary">返回訂單列表</a>
</div>